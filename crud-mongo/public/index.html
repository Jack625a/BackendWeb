<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD</title>
</head>
<body>

    <h1>API REST</h1>
    <nav>
        <ul>
            <li><a href="/">Inicio</a></li>
            <li><a href="update.html">Actualizacion de datos</a></li>
            <li><a href="delete.html">Borrar</a></li>
        </ul>    
    </nav>

    <h1>Lista de productos</h1>
    <ul id="item-list"></ul>

    <script>
        function show(e) {
            const itemList = document.getElementById('item-list')
            itemList.innerHTML = ''

            e.forEach(e => {
                const card = document.createElement('div')
                card.classList.add('card')

                const image = document.createElement('img')
                image.src = e.image
                card.appendChild(image)
                
                const name = document.createElement('h3')
                name.textContent = e.name
                card.appendChild(name)

                const price = document.createElement('p')
                price.textContent = 'Price: Bs' + e.price
                card.appendChild(price)

                itemList.appendChild(card)
            })
        }

        async function getE() {
            try {
                const response = await fetch('/items')
                const data = await response.json()
                show(data)
            } catch (e) {
                console.log('error al get data');
            }
        }

        window.addEventListener('DOOMContentLoaded', getE)

    </script>

    <h1>Insertar Datos</h1>
    <form action="/items" method="POST">
        <label for="name">Nombre:</label>
        <input type="text" name="name" id="name" required>
        <input type="number" id="price" name="price" required>
        <input type="url" id="image" name="image" required>
        <button type="submit">Agregar nuevo producto</button>
    </form>
    
    <script src="requestItems.js"></script>

    </body>
</html>